{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aleksandar\\\\Desktop\\\\Udemy\\\\React\\\\crwn-clothing\\\\src\\\\contexts\\\\user.context.jsx\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useReducer } from \"react\";\nimport { onAuthStateChangedListener, createUserDocumentFromAuth } from \"../utils/firebase/firebase.utils\";\n\n// as the actual value you want to accsess\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext({\n  currentUser: null,\n  setCurrentUser: () => null\n});\nexport const USER_ACTION_TYPES = {\n  SET_CURRENT_USER: \"SET_CURRENT_USER\"\n};\nconst userReducer = (state, action) => {\n  console.log(\"dispatched\");\n  console.log(action);\n  const {\n    type,\n    payload\n  } = action;\n  switch (type) {\n    case USER_ACTION_TYPES.SET_CURRENT_USER:\n      return {\n        ...state,\n        currentUser: payload\n      };\n    default:\n      throw new Error(`Unhandled type ${type} in userReducer`);\n  }\n};\nconst INITIAL_STATE = {\n  currentUser: null\n};\nexport const UserProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  //const [currentUser, setCurrentUser] = useState(null);\n  const [{\n    currentUser\n  }, dispatch] = useReducer(userReducer, INITIAL_STATE);\n  console.log(currentUser);\n  const setCurrentUser = user => {\n    dispatch({\n      type: USER_ACTION_TYPES.SET_CURRENT_USER,\n      payload: user\n    });\n  };\n  const value = {\n    currentUser,\n    setCurrentUser\n  };\n  useEffect(() => {\n    const unsubscribe = onAuthStateChangedListener(user => {\n      if (user) {\n        createUserDocumentFromAuth(user);\n      }\n      setCurrentUser(user);\n    });\n    return unsubscribe;\n  }, []);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 10\n  }, this);\n};\n_s(UserProvider, \"4MCG2lfWYDhUrag1f5xCpMt+rJI=\");\n_c = UserProvider;\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["createContext","useEffect","useReducer","onAuthStateChangedListener","createUserDocumentFromAuth","jsxDEV","_jsxDEV","UserContext","currentUser","setCurrentUser","USER_ACTION_TYPES","SET_CURRENT_USER","userReducer","state","action","console","log","type","payload","Error","INITIAL_STATE","UserProvider","_ref","_s","children","dispatch","user","value","unsubscribe","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Aleksandar/Desktop/Udemy/React/crwn-clothing/src/contexts/user.context.jsx"],"sourcesContent":["import { createContext, useEffect, useReducer } from \"react\";\r\nimport {\r\n  onAuthStateChangedListener,\r\n  createUserDocumentFromAuth,\r\n} from \"../utils/firebase/firebase.utils\";\r\n\r\n// as the actual value you want to accsess\r\nexport const UserContext = createContext({\r\n  currentUser: null,\r\n  setCurrentUser: () => null,\r\n});\r\n\r\nexport const USER_ACTION_TYPES = {\r\n  SET_CURRENT_USER: \"SET_CURRENT_USER\",\r\n};\r\n\r\nconst userReducer = (state, action) => {\r\n  console.log(\"dispatched\");\r\n  console.log(action);\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case USER_ACTION_TYPES.SET_CURRENT_USER:\r\n      return {\r\n        ...state,\r\n        currentUser: payload,\r\n      };\r\n\r\n    default:\r\n      throw new Error(`Unhandled type ${type} in userReducer`);\r\n  }\r\n};\r\n\r\nconst INITIAL_STATE = {\r\n  currentUser: null,\r\n};\r\n\r\nexport const UserProvider = ({ children }) => {\r\n  //const [currentUser, setCurrentUser] = useState(null);\r\n  const [{ currentUser }, dispatch] = useReducer(userReducer, INITIAL_STATE);\r\n  console.log(currentUser);\r\n\r\n  const setCurrentUser = (user) => {\r\n    dispatch({ type: USER_ACTION_TYPES.SET_CURRENT_USER, payload: user });\r\n  };\r\n\r\n  const value = { currentUser, setCurrentUser };\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChangedListener((user) => {\r\n      if (user) {\r\n        createUserDocumentFromAuth(user);\r\n      }\r\n      setCurrentUser(user);\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  return <UserContext.Provider value={value}>{children}</UserContext.Provider>;\r\n};\r\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC5D,SACEC,0BAA0B,EAC1BC,0BAA0B,QACrB,kCAAkC;;AAEzC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAO,MAAMC,WAAW,gBAAGP,aAAa,CAAC;EACvCQ,WAAW,EAAE,IAAI;EACjBC,cAAc,EAAEA,CAAA,KAAM;AACxB,CAAC,CAAC;AAEF,OAAO,MAAMC,iBAAiB,GAAG;EAC/BC,gBAAgB,EAAE;AACpB,CAAC;AAED,MAAMC,WAAW,GAAGA,CAACC,KAAK,EAAEC,MAAM,KAAK;EACrCC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;EACzBD,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC;EACnB,MAAM;IAAEG,IAAI;IAAEC;EAAQ,CAAC,GAAGJ,MAAM;EAEhC,QAAQG,IAAI;IACV,KAAKP,iBAAiB,CAACC,gBAAgB;MACrC,OAAO;QACL,GAAGE,KAAK;QACRL,WAAW,EAAEU;MACf,CAAC;IAEH;MACE,MAAM,IAAIC,KAAK,CAAE,kBAAiBF,IAAK,iBAAgB,CAAC;EAAC;AAE/D,CAAC;AAED,MAAMG,aAAa,GAAG;EACpBZ,WAAW,EAAE;AACf,CAAC;AAED,OAAO,MAAMa,YAAY,GAAGC,IAAA,IAAkB;EAAAC,EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC,GAAAF,IAAA;EACvC;EACA,MAAM,CAAC;IAAEd;EAAY,CAAC,EAAEiB,QAAQ,CAAC,GAAGvB,UAAU,CAACU,WAAW,EAAEQ,aAAa,CAAC;EAC1EL,OAAO,CAACC,GAAG,CAACR,WAAW,CAAC;EAExB,MAAMC,cAAc,GAAIiB,IAAI,IAAK;IAC/BD,QAAQ,CAAC;MAAER,IAAI,EAAEP,iBAAiB,CAACC,gBAAgB;MAAEO,OAAO,EAAEQ;IAAK,CAAC,CAAC;EACvE,CAAC;EAED,MAAMC,KAAK,GAAG;IAAEnB,WAAW;IAAEC;EAAe,CAAC;EAE7CR,SAAS,CAAC,MAAM;IACd,MAAM2B,WAAW,GAAGzB,0BAA0B,CAAEuB,IAAI,IAAK;MACvD,IAAIA,IAAI,EAAE;QACRtB,0BAA0B,CAACsB,IAAI,CAAC;MAClC;MACAjB,cAAc,CAACiB,IAAI,CAAC;IACtB,CAAC,CAAC;IACF,OAAOE,WAAW;EACpB,CAAC,EAAE,EAAE,CAAC;EAEN,oBAAOtB,OAAA,CAACC,WAAW,CAACsB,QAAQ;IAACF,KAAK,EAAEA,KAAM;IAAAH,QAAA,EAAEA;EAAQ;IAAAM,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAAwB;AAC9E,CAAC;AAACV,EAAA,CAtBWF,YAAY;AAAAa,EAAA,GAAZb,YAAY;AAAA,IAAAa,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}